{"version":3,"sources":["kendo.reactComponent.js"],"names":["kendo","ui","Widget","$","type","obj","Object","prototype","toString","call","slice","shouldKendoUnwrap","sourceGet","isReallyObservable","__proto__","data","ObservableObject","constructor","binders","widget","reactcomponent","Binder","extend","init","bindings","options","fn","this","element","_lookups","key","path","push","refresh","lookup","args","i","length","toLowerCase","propObj","propKey","hasOwnProperty","source","get","props","value","component","children","ReactComponent","_value","arguments","React","render","createElement","componentName","name","destroy","unmountComponentAtNode","plugin","jQuery"],"mappings":"AAAA,cAEA,SAAAA,EAAAC,EAAAC,EAAAC,GAgBA,QAAAC,GAAAC,GACA,MAAAC,QAAAC,UAAAC,SAAAC,KAAAJ,GAAAK,MAAA,EAAA,IAGA,QAAAC,GAAAC,GACA,GAAAC,IAAA,CACA,IAAAD,GAAA,aAAAR,EAAAQ,GAAA,CACA,GAAAC,IAAA,CAEAA,GADAD,EAAAE,UACAd,EAAAe,KAAAC,mBAAAJ,EAAAE,UAAAG,YAGAL,EAAAK,aAAAL,EAAAK,cAAAjB,EAAAe,KAAAC,iBAGA,MAAAH,GAGAb,EAAAe,KAAAG,QAAAC,OAAAC,eAAApB,EAAAe,KAAAM,OAAAC,QACAC,KAAA,SAAAJ,EAAAK,EAAAC,GACAzB,EAAAe,KAAAM,OAAAK,GAAAH,KAAAd,KAAAkB,KAAAR,EAAAS,QAAA,GAAAJ,EAAAC,GAEAE,KAAAE,WACA,KAAA,GAAAC,KAAAH,MAAAH,SAAAJ,eAAAW,KACAJ,KAAAE,SAAAG,MACAF,IAAAA,EACAC,KAAAJ,KAAAH,SAAAJ,eAAAW,KAAAD,MAIAG,QAAA,WAIA,IAAA,GAHAC,GAEAC,KACAC,EAAA,EAAAA,EAAAT,KAAAE,SAAAQ,OAAAD,IAEA,GADAF,EAAAP,KAAAE,SAAAO,GACA,UAAAF,EAAAJ,IAAAQ,eAAA,WAAAlC,EAAA8B,EAAAH,MAAA,CACA,GAAAQ,KACA,KAAA,GAAAC,KAAAN,GAAAH,KACA,GAAAzB,OAAAmC,eAAAhC,KAAAyB,EAAAH,KAAAS,GAAA,CACAb,KAAAH,SAAAJ,eAAAW,KAAAG,EAAAH,KAAAS,EAEA,IAAA5B,GAAAe,KAAAH,SAAAJ,eAAAsB,OAAAC,IAAAT,EAAAH,KAAAS,GAEA7B,GAAAC,GAEA2B,EAAAC,GAAAb,KAAAH,SAAAJ,eAAAuB,MAGAJ,EAAAC,GAAA5B,EAIAuB,EAAAS,MAAAL,MACA,CACA,GAAA3B,GAAAe,KAAAH,SAAAJ,eAAAsB,OAAAC,IAAAT,EAAAH,KACAJ,MAAAH,SAAAJ,eAAAW,KAAAG,EAAAH,KACApB,EAAAC,GAEAuB,EAAAD,EAAAJ,KAAAH,KAAAH,SAAAJ,eAAAuB,MAGAR,EAAAD,EAAAJ,KAAAlB,EAKAT,EAAAwB,KAAAC,SAAAb,KAAA,uBAAA8B,OACAC,UAAAX,EAAAW,UACAF,MAAAT,EAAAS,MACAG,SAAAZ,EAAAY,aAKA,IAAAC,GAAA9C,EAAAoB,QACAC,KAAA,SAAAK,EAAAH,GACAvB,EAAAwB,GAAAH,KAAAd,KAAAkB,KAAAC,EAAAH,IAKAoB,MAAA,SAAAI,GACA,MAAA,KAAAC,UAAAb,OAEAV,KAAAsB,QAGAE,MAAAC,OAAAD,MAAAE,cAAAJ,EAAAK,eAAAL,EAAAH,UAAAG,EAAAL,UAAAK,EAAAF,cAAA5C,EAAAwB,KAAAC,SAAA,SACAD,KAAAsB,OAAAA,KAGAhB,QAAA,aACAR,SACA8B,KAAA,kBAEAC,QAAA,WACAL,MAAAM,uBAAAtD,EAAAwB,KAAAC,SAAA,MAGA3B,GAAAyD,OAAAV,IACAhD,MAAAA,MAAAC,GAAAD,MAAAC,GAAAC,OAAAyD","file":"kendo.reactComponent.js","sourcesContent":["\"use strict\";\n\n(function (kendo, ui, Widget, $) {\n\n  //kendo.data.binders.widget.reactcomponent = kendo.data.Binder.extend({\n  //    init: function(widget, bindings, options) {\n  //\n  //       //kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);\n  //        kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);\n  //\n  //    },\n  //   refresh: function(key) {\n  //       //var args = this.bindings[\"reactcomponent\"].get();\n  //       //console.log(args);\n  //       console.log('refresh with', arguments);\n  //   }\n  //});\n\n  function type(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1);\n  }\n\n  function shouldKendoUnwrap(sourceGet) {\n    var isReallyObservable = true;\n    if (sourceGet && type(sourceGet) === 'Function') {\n      var isReallyObservable = false;\n      if (sourceGet.__proto__) {\n        isReallyObservable = kendo.data.ObservableObject === sourceGet.__proto__.constructor; //modern browsers\n      } else {\n          //ie 8 and such\n          isReallyObservable = sourceGet.constructor && sourceGet.constructor === kendo.data.ObservableObject;\n        }\n    }\n    return isReallyObservable;\n  }\n\n  kendo.data.binders.widget.reactcomponent = kendo.data.Binder.extend({\n    init: function init(widget, bindings, options) {\n      kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);\n\n      this._lookups = [];\n      for (var key in this.bindings.reactcomponent.path) {\n        this._lookups.push({\n          key: key,\n          path: this.bindings.reactcomponent.path[key]\n        });\n      }\n    },\n    refresh: function refresh() {\n      var lookup,\n          value,\n          args = {};\n      for (var i = 0; i < this._lookups.length; i++) {\n        lookup = this._lookups[i];\n        if (lookup.key.toLowerCase() === \"props\" && type(lookup.path) !== \"String\") {\n          var propObj = {};\n          for (var propKey in lookup.path) {\n            if (Object.hasOwnProperty.call(lookup.path, propKey)) {\n              this.bindings.reactcomponent.path = lookup.path[propKey];\n              //Woah... kendo's check for an observable messes up on passing functions :(\n              var sourceGet = this.bindings.reactcomponent.source.get(lookup.path[propKey]);\n              //Is this a function, and if so, is it really an observable?\n              if (shouldKendoUnwrap(sourceGet)) {\n                //Let Kendo get it for us\n                propObj[propKey] = this.bindings.reactcomponent.get();\n              } else {\n                //Get the source ourselves ...\n                propObj[propKey] = sourceGet;\n              }\n            }\n          }\n          args.props = propObj;\n        } else {\n          var sourceGet = this.bindings.reactcomponent.source.get(lookup.path);\n          this.bindings.reactcomponent.path = lookup.path;\n          if (shouldKendoUnwrap(sourceGet)) {\n            //Let Kendo get it for us\n            args[lookup.key] = this.bindings.reactcomponent.get();\n          } else {\n            //Get the source ourselves ...\n            args[lookup.key] = sourceGet;\n          }\n        }\n      }\n\n      $(this.element).data('kendoReactComponent').value({\n        component: args.component,\n        props: args.props,\n        children: args.children\n      });\n    }\n  });\n\n  var ReactComponent = Widget.extend({\n    init: function init(element, options) {\n      Widget.fn.init.call(this, element, options);\n      //where to get React.render(<App />, document.getElementById('appBody'));\n      //React.render(React.createElement('div', props, props.children))\n      //React.render(React.createElement(App, null), $(element)[0]);\n    },\n    value: function value(_value) {\n      if (arguments.length === 0) {\n        //We, as a react component, shouldn't be changing this\n        return this._value;\n      } else {\n        debugger;\n        React.render(React.createElement(_value.componentName || _value.component, _value.props || {}, _value.children || []), $(this.element)[0]);\n        this._value = _value;\n      }\n    },\n    refresh: function refresh() {},\n    options: {\n      name: \"ReactComponent\"\n    },\n    destroy: function destroy() {\n      React.unmountComponentAtNode($(this.element)[0]);\n    }\n  });\n  ui.plugin(ReactComponent);\n})(kendo, kendo.ui, kendo.ui.Widget, jQuery);"],"sourceRoot":"/source/"}